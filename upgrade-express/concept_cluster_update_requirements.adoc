---
permalink: upgrade-express/concept_cluster_update_requirements.html
sidebar: sidebar
keywords: 
summary: 'There are release and configuration requirements that your cluster should meet before you perform an update. Additionally, there are mixed version requirements that you should be aware of while you are performing the update.'
---
= Cluster update requirements
:icons: font
:imagesdir: ../media/

[.lead]
There are release and configuration requirements that your cluster should meet before you perform an update. Additionally, there are mixed version requirements that you should be aware of while you are performing the update.

NOTE: Before upgrading, you should launch Active IQ Digital Advisor. The Upgrade Advisor component of Active IQ Digital Advisor helps you plan for a successful upgrade.

== Release requirements

The version of ONTAP that you can upgrade or downgrade to varies based on the version of ONTAP currently running on your nodes. You can determine the current version of ONTAP running on each node by using the system image show command.

NOTE: If you are running a release earlier than Data ONTAP 8.3.x, you cannot upgrade directly to ONTAP 9 or 9.1. You must upgrade to Data ONTAP 8.3.x first, then upgrade to ONTAP 9 or 9.1.

|===
| You can upgrade from...| To...
a|
ONTAP 9.7
a|
ONTAP 9.8
a|
ONTAP 9.6
a|
ONTAP 9.7 or 9.8
a|
ONTAP 9.5
a|
ONTAP 9.6 or 9.7
a|
ONTAP 9.4
a|
ONTAP 9.5
a|
ONTAP 9.3
a|
ONTAP 9.4, 9.5 or 9.7**Note:** If you are upgrading from ONTAP 9.3 directly to 9.7, you must download the software image for ONTAP 9.5 and 9.7. The automated upgrade process uses the 9.5 image in the background to complete the update to 9.7. You should expect multiple reboots during the process.

a|
ONTAP 9.2
a|
ONTAP 9.3
a|
ONTAP 9.1
a|
ONTAP 9.2 or 9.3
a|
ONTAP 9
a|
ONTAP 9.1
a|
Data ONTAP 8.3.x
a|
ONTAP 9 or 9.1
a|
Data ONTAP 8.2.x
a|
Data ONTAP 8.3.x
|===
|===
| You can downgrade from...| To...
a|
ONTAP 9.1
a|
ONTAP 9**Note:** Downgrade of a two-node MetroCluster configuration from ONTAP 9.1 to 9 is disruptive.

|===
|===
| You must perform a revert from...| To...
a|
ONTAP 9.8
a|
ONTAP 9.7
a|
ONTAP 9.7
a|
ONTAP 9.6
a|
ONTAP 9.6
a|
ONTAP 9.5
a|
ONTAP 9.5
a|
ONTAP 9.4
a|
ONTAP 9.4
a|
ONTAP 9.3
a|
ONTAP 9.3
a|
ONTAP 9.2
a|
ONTAP 9.2
a|
ONTAP 9.1
a|
ONTAP 9.1 or ONTAP 9
a|
Data ONTAP 8.3.x
|===

== Mixed version requirements

Beginning with ONTAP 9.3, by default, you cannot join new nodes to the cluster that are running a version of ONTAP that is different from the version running on the existing nodes. If you plan to add new nodes to your cluster that are running a version of ONTAP that is later than the nodes in your existing cluster, you should upgrade the nodes in your cluster to the later version first, then add the new nodes.

Mixed version clusters are not recommended, but in certain cases you might need to temporarily enter a mixed version state. For example, you need to enter a mixed version state if you are upgrading to a later version of ONTAP that is not supported on certain nodes in your existing cluster. In this case, you should upgrade the nodes that do support the later version of ONTAP, then unjoin the nodes that do not support the version of ONTAP you are upgrading to using the advance privilege cluster unjoin -skip-lastlow-version-node check command.

You might also need to enter a mixed version state for a technical refresh or an interrupted upgrade. In such cases you can override the ONTAP 9.3 default behavior and join nodes of a different version using the following advance privilege commands:

* cluster join -allow-mixed-version-join
* cluster add-node -allow-mixed-version-join

When you have to enter a mixed version state, you should complete the upgrade as quickly as possible. An HA pair must not run an ONTAP version from a release that is different from other HA pairs in the cluster for more than seven days. For correct cluster operation, the period the cluster is in a mixed version state should be as short as possible.

When the cluster is in a mixed version state, you should not enter any commands that alter the cluster operation or configuration except as necessary to satisfy the upgrade requirements.

*Related information*

https://aiq.netapp.com/[Launch Active IQ]

https://docs.netapp.com/us-en/active-iq/[Active IQ documentation]
