---
permalink: upgrade/task_installing_ontap_software_images.html
sidebar: sidebar
keywords: Data ONTAP,ONTAP
summary: 'You must install the target software image on the clusterâ€™s nodes.'
---
= Installing the ONTAP software image
:icons: font
:imagesdir: ../media/

[.lead]
You must install the target software image on the cluster's nodes.

* If you are upgrading a system with NetApp Volume Encryption to ONTAP 9.5 or later, you must have downloaded the ONTAP software image for non-restricted countries, which includes NetApp Volume Encryption.
+
If you use the ONTAP software image for restricted countries to upgrade a system with NetApp Volume Encryption, the system panics and you lose access to your volumes.

* If you are upgrading from ONTAP 9.3 directly to 9.7, you must download and install the software image for ONTAP 9.5 and 9.7.
+
The automated upgrade process uses the 9.5 image in the background to complete the update to 9.7.

. Set the privilege level to advanced, entering *y* when prompted to continue: `set -privilege advanced`
+
The advanced prompt (`*>`) appears.

. Install the software image on the nodes.
+
This command downloads and installs the software image on all of the nodes simultaneously. To download and install the image on each node one at a time, do not specify the -background parameter.

 ** If you are upgrading a non-MetroCluster configuration or a two-node MetroCluster configuration:``system node image update -node * -package location -replace-package true -setdefault true -background true``
+
This command uses an extended query to change the target software image, which is installed as the alternate image, to be the default image for the node.

 ** If you are upgrading a four or eight-node MetroCluster configuration, you must issue the following command on both clusters: `system node image update -node * -package location -replace-package true true -background true -setdefault false`
+
This command uses an extended query to change the target software image, which is installed as the alternate image on each node.

. Enter `y` to continue when prompted.
. Verify that the software image is downloaded and installed on each node: `system node image show-update-progress -node *`
+
This command displays the current status of the software image download and installation. You should continue to run this command until all nodes report a Run Status of Exited, and an Exit Status of Success.
+
The system node image update command can fail and display error or warning messages. After resolving any errors or warnings, you can run the command again.
+
This example shows a two-node cluster in which the software image is downloaded and installed successfully on both nodes:
+
----
cluster1::*> system node image show-update-progress -node *
There is no update/install in progress
Status of most recent operation:
        Run Status:     Exited
        Exit Status:    Success
        Phase:          Run Script
        Exit Message:   After a clean shutdown, image2 will be set as the default boot image on node0.
There is no update/install in progress
Status of most recent operation:
        Run Status:     Exited
        Exit Status:    Success
        Phase:          Run Script
        Exit Message:   After a clean shutdown, image2 will be set as the default boot image on node1.
2 entries were acted on.
----
